LLM1 PROMPT:
You are an expert in XML structure generation for compartmental epidemiological models with stratification support.

Your task is to generate a structurally correct compartmental model in XML format based on the provided user input and the v3 metamodel specification.

**XML Formatting Rules - CRITICAL**
- Output ONLY valid, well-formed XML with no markdown code blocks, no ```xml tags, no explanations before or after.
- Every opening tag must have a corresponding closing tag.
- Self-closing tags MUST end with `/>`.
- Ensure there are no stray characters or missing `>` or `/>`.
- Do not break tags across multiple lines.
- Use proper indentation (2 spaces per level).
- Validate the entire structure before output: check matching tag pairs, correct attribute quotes, no illegal characters.

**Modeling Rules**
- Generate compartments, flows, parameters, groups, products, birth sources, and death sinks exactly as specified in user input.
- Do NOT assume a fixed model structure (e.g., SEIR) unless explicitly specified by the user.
- For PARAMETRIC models: Use parameter references as defined in the metamodel. Set numeric attributes to 0.0 as placeholders where required.
- For NUMERIC models: Use numeric attributes with [[rate_missing]] as placeholder values.
- Use 0-based indexing for all references (parameters, compartments, groups, products).
- Follow the v3 metamodel strictly for element names, attributes, and nesting structure.
- If user input specifies stratification (Groups/Products), apply product references to compartments and create stratum-specific rates as instructed.
- For ContactFlow elements, include contactCompartment only if required by the metamodel and user input.
- Generate all flows, birth sources, and death sinks as listed in user input. Do not omit any.

**Reference Format**
- Parameter references: parameter="//@parameters.X" where X is the 0-based parameter index
- Compartment references: target="//@compartments.X" or sourceCompartment="//@compartments.X"
- Product references: product="//@products.X"
- Group references: groups="//@groups.X"

**Reasoning**
- Before generating XML, output your reasoning as XML comments at the top explaining:
  * How many compartments, parameters, groups, products you will create
  * Which compartments are stratified and by which product
  * How you mapped flows from user input to XML structure
  * Any assumptions or interpretations made

**Output Format**
- First: XML comments with reasoning
- Then: Complete XML structure starting with <?xml version="1.0" encoding="UTF-8"?>
- No markdown formatting, no code fences, no explanatory text outside XML comments
- The output must be directly parseable as XML
********************************************************************************
METAMODEL:
{
  "seirmodel_metamodel": {
    "version": "2.0",
    "description": "EpiMDE Metamodel - Supports both numeric and parametric (symbolic) modeling approaches for epidemiological compartmental models",
    "structure": {
      "xml_declaration": {
        "version": "1.0",
        "encoding": "UTF-8"
      },
      "root_element": {
        "tag": "seir:SEIRModel",
        "attributes": {
          "xmi:version": "2.0",
          "xmlns:xmi": "http://www.omg.org/XMI",
          "xmlns:xsi": "http://www.w3.org/2001/XMLSchema-instance",
          "xmlns:seir": "http://example.com/seirmodel"
        },
        "optional_attributes": [
          "totalPopulation",
          "globalBirthRate",
          "globalDeathRate"
        ]
      },
      "parameters": {
        "element": "parameters",
        "required_attributes": [
          "name"
        ],
        "optional_attributes": [
          "type",
          "expression",
          "description",
          "unit"
        ],
        "description": "Named parameters for symbolic/parametric modeling. Enables separation of model structure from parameter values.",
        "attributes": {
          "name": {
            "description": "Parameter identifier. Supports Unicode including Greek letters (\u03b1, \u03b2, \u03b3, \u03b4, \u03bc, \u03c1, \u03b8, \u03bb) and subscripts (\u2095, \u1d65, \u2081, \u2082)",
            "examples": [
              "\u03b2\u2081",
              "\u03bc\u2095",
              "a(T)",
              "\u03b2\u2082a(T)",
              "\u03b8\u1d65(T,R)",
              "\u03b3\u2095"
            ]
          },
          "type": {
            "description": "Parameter type: CONSTANT (default), VARIABLE, or EXPRESSION",
            "values": [
              "CONSTANT",
              "VARIABLE",
              "EXPRESSION"
            ],
            "default": "CONSTANT"
          },
          "expression": {
            "description": "For CONSTANT/VARIABLE: numeric value. For EXPRESSION: mathematical formula referencing other parameters/compartments",
            "examples": [
              "0.001384",
              "0.000203 * T * (T - 11.7) * sqrt(42.3 - T)",
              "\u03b2\u2082 * a(T)",
              "\u03bc\u2095 + 0.017325"
            ]
          },
          "description": {
            "description": "Human-readable explanation of the parameter",
            "examples": [
              "Natural mortality rate of human population",
              "Mosquito biting rate",
              "Recovery rate Ih to Rh"
            ]
          },
          "unit": {
            "description": "Physical unit of measurement. Supports Unicode symbols.",
            "examples": [
              "per day",
              "1/time",
              "dimensionless",
              "\u00b0C",
              "bites/person/time"
            ]
          }
        },
        "parameter_types": {
          "CONSTANT": {
            "description": "Fixed value with a name, used for model parameters that don't change during simulation",
            "use_cases": [
              "Natural death rates",
              "Recovery rates",
              "Transmission probabilities"
            ],
            "example": "<parameters name=\"\u03bc\u2095\" expression=\"0.001384\" description=\"Natural mortality rate\" unit=\"1/time\"/>"
          },
          "VARIABLE": {
            "description": "Placeholder for values provided at simulation time, such as environmental conditions or intervention levels",
            "use_cases": [
              "Temperature",
              "Rainfall",
              "Intervention effectiveness"
            ],
            "example": "<parameters name=\"T\" type=\"VARIABLE\" description=\"Temperature\" unit=\"\u00b0C\"/>"
          },
          "EXPRESSION": {
            "description": "Computed value defined as a mathematical expression referencing other parameters and/or compartments",
            "use_cases": [
              "Combined rates",
              "Temperature-dependent rates",
              "Death rates with disease mortality"
            ],
            "example": "<parameters name=\"\u03b2\u2082a(T)\" type=\"EXPRESSION\" expression=\"\u03b2\u2082 * a(T)\" description=\"Combined contact rate\" unit=\"1/time\"/>"
          }
        }
      },
      "compartments": {
        "element": "compartments",
        "required_attributes": [
          "PrimaryName"
        ],
        "optional_attributes": [
          "SecondaryName",
          "population",
          "product"
        ],
        "child_elements": [
          "outgoingFlows"
        ],
        "constraints": {
          "product": "Reference to product using format '//@products.X'"
        }
      },
      "outgoingFlows": {
        "abstract_element": "outgoingFlows",
        "concrete_types": [
          "RateFlow",
          "ContactFlow"
        ],
        "common_required_attributes": [
          "target"
        ],
        "common_optional_attributes": [
          "description"
        ],
        "constraints": {
          "target": "Must be 0-based index in format '//@compartments.X'"
        }
      },
      "RateFlow": {
        "element": "outgoingFlows",
        "xsi_type": "seir:RateFlow",
        "modeling_modes": {
          "numeric": {
            "required_attributes": [
              "rate",
              "target"
            ],
            "description": "Use numeric rate attribute directly"
          },
          "parametric": {
            "required_attributes": [
              "rateParameter",
              "target"
            ],
            "description": "Reference a Parameter by index. Parameter takes precedence over numeric rate."
          }
        },
        "optional_attributes": [
          "description"
        ],
        "child_elements": [
          "stratumSpecificRates"
        ],
        "attributes": {
          "rate": {
            "description": "Numeric rate value. For parametric models, set to 0.0 and use rateParameter instead.",
            "constraint": "Must be float/decimal value"
          },
          "rateParameter": {
            "description": "Reference to a Parameter defining this flow's rate. Format: '//@parameters.X' where X is 0-based index.",
            "constraint": "Must reference existing parameter"
          }
        },
        "examples": {
          "numeric": "<outgoingFlows xsi:type=\"seir:RateFlow\" rate=\"0.120342\" target=\"//@compartments.3\"/>",
          "parametric": "<outgoingFlows xsi:type=\"seir:RateFlow\" rateParameter=\"//@parameters.9\" target=\"//@compartments.3\"/>"
        }
      },
      "ContactFlow": {
        "element": "outgoingFlows",
        "xsi_type": "seir:ContactFlow",
        "modeling_modes": {
          "numeric": {
            "required_attributes": [
              "contactRate",
              "contactCompartment",
              "target"
            ],
            "description": "Use numeric contactRate attribute directly"
          },
          "parametric": {
            "required_attributes": [
              "contactRateParameter",
              "contactCompartment",
              "target"
            ],
            "description": "Reference a Parameter by index. Parameter takes precedence over numeric contactRate."
          }
        },
        "optional_attributes": [
          "description",
          "contactParameters"
        ],
        "child_elements": [
          "stratumSpecificRates"
        ],
        "attributes": {
          "contactRate": {
            "description": "Numeric contact/transmission rate. For parametric models, set to 0.0 and use contactRateParameter instead.",
            "constraint": "Must be float/decimal value"
          },
          "contactRateParameter": {
            "description": "Reference to a Parameter defining this flow's contact rate. Format: '//@parameters.X' where X is 0-based index.",
            "constraint": "Must reference existing parameter"
          },
          "contactCompartment": {
            "description": "Reference to compartment influencing transmission (usually Infectious or Infected Mosquitoes)",
            "constraint": "Must reference existing compartment using format '//@compartments.X'"
          }
        },
        "examples": {
          "numeric": "<outgoingFlows xsi:type=\"seir:ContactFlow\" contactRate=\"0.09636\" contactCompartment=\"//@compartments.1\" target=\"//@compartments.1\"/>",
          "parametric": "<outgoingFlows xsi:type=\"seir:ContactFlow\" contactRateParameter=\"//@parameters.2\" contactCompartment=\"//@compartments.6\" target=\"//@compartments.1\"/>"
        }
      },
      "stratumSpecificRates": {
        "element": "stratumSpecificRates",
        "modeling_modes": {
          "numeric": {
            "required_attributes": [
              "stratum",
              "rate"
            ],
            "optional_attributes": [
              "multiplier"
            ]
          },
          "parametric": {
            "required_attributes": [
              "stratum"
            ],
            "optional_attributes": [
              "rateParameter",
              "multiplierParameter"
            ]
          }
        },
        "attributes": {
          "rate": "Numeric rate value for this stratum",
          "rateParameter": "Reference to Parameter for this stratum's rate",
          "multiplier": "Numeric multiplier applied to base rate (defaults to 1.0)",
          "multiplierParameter": "Reference to Parameter for multiplier"
        },
        "constraints": {
          "rate": "Must be float/decimal value",
          "multiplier": "Must be float/decimal value, defaults to 1.0",
          "rateParameter": "Format: '//@parameters.X'",
          "multiplierParameter": "Format: '//@parameters.X'"
        }
      },
      "birthSources": {
        "element": "birthSources",
        "modeling_modes": {
          "numeric": {
            "required_attributes": [
              "name",
              "rate",
              "targetCompartment"
            ]
          },
          "parametric": {
            "required_attributes": [
              "name",
              "rateParameter",
              "targetCompartment"
            ]
          }
        },
        "optional_attributes": [
          "targetStratum",
          "fixedRate"
        ],
        "attributes": {
          "rate": "Numeric birth rate",
          "rateParameter": "Reference to Parameter for birth rate. Format: '//@parameters.X'"
        },
        "constraints": {
          "rate": "Must be float/decimal value",
          "rateParameter": "Must reference existing parameter",
          "targetCompartment": "Reference to compartment using format '//@compartments.X'",
          "fixedRate": "Boolean value, defaults to false"
        },
        "examples": {
          "numeric": "<birthSources name=\"Humans\" rate=\"15129\" targetCompartment=\"//@compartments.0\"/>",
          "parametric": "<birthSources name=\"Humans\" rateParameter=\"//@parameters.0\" targetCompartment=\"//@compartments.0\"/>"
        }
      },
      "deathSinks": {
        "element": "deathSinks",
        "modeling_modes": {
          "numeric": {
            "required_attributes": [
              "name",
              "rate",
              "sourceCompartment"
            ]
          },
          "parametric": {
            "required_attributes": [
              "name",
              "rateParameter",
              "sourceCompartment"
            ]
          }
        },
        "optional_attributes": [
          "sourceStratum"
        ],
        "attributes": {
          "rate": "Numeric death rate",
          "rateParameter": "Reference to Parameter for death rate. Format: '//@parameters.X'"
        },
        "constraints": {
          "rate": "Must be float/decimal value",
          "rateParameter": "Must reference existing parameter",
          "sourceCompartment": "Reference to compartment using format '//@compartments.X'"
        },
        "examples": {
          "numeric": "<deathSinks name=\"Natural_Death_SH\" rate=\"0.001384\" sourceCompartment=\"//@compartments.0\"/>",
          "parametric": "<deathSinks name=\"Natural_Death_SH\" rateParameter=\"//@parameters.5\" sourceCompartment=\"//@compartments.0\"/>"
        }
      },
      "groups": {
        "element": "groups",
        "required_attributes": [
          "name"
        ],
        "optional_attributes": [
          "description"
        ],
        "child_elements": [
          "values"
        ],
        "constraints": {
          "values": "Array of string values representing the group stratification levels"
        }
      },
      "products": {
        "element": "products",
        "required_attributes": [
          "name"
        ],
        "optional_attributes": [
          "description"
        ],
        "child_elements": [
          "groups"
        ],
        "constraints": {
          "groups": "Reference to groups using format '//@groups.X'"
        }
      }
    },
    "compartment_types": {
      "epidemiological_states": [
        "Susceptible",
        "Exposed",
        "Infectious",
        "Recovered",
        "Deceased",
        "Dead",
        "Removed"
      ],
      "treatment_states": [
        "Vaccinated",
        "Treated",
        "Hospitalized",
        "Quarantined",
        "Isolated"
      ],
      "vector_states": [
        "Susceptible Mosquitoes",
        "Exposed Mosquitoes",
        "Infectious Mosquitoes"
      ],
      "demographic_states": [
        "Recruitment",
        "Birth",
        "Immigration"
      ],
      "terminal_states": [
        "Death",
        "Natural Death",
        "Death due to AIDS",
        "Dead"
      ],
      "severity_modifiers": [
        "Asymptomatic",
        "Symptomatic",
        "Mild",
        "Moderate",
        "Severe",
        "Critical"
      ],
      "location_modifiers": [
        "ICU",
        "Hospital",
        "Home",
        "Community"
      ]
    },
    "secondary_name_patterns": {
      "demographic_groups": [
        "Homosexual Men",
        "Heterosexual Men",
        "Women",
        "Children",
        "Adults",
        "Elderly"
      ],
      "disease_progression": [
        "presymptomatic",
        "mild to moderate",
        "severe",
        "pre-ICU",
        "post-ICU"
      ],
      "intervention_status": [
        "isolated",
        "quarantined",
        "with ART",
        "living with AIDS"
      ],
      "vaccination_status": [
        "Vaccinated",
        "Unvaccinated",
        "First dose",
        "Second dose"
      ],
      "transmission_route": [
        "vector",
        "non-vector",
        "direct",
        "indirect"
      ]
    },
    "flow_patterns": {
      "common_transitions": [
        "Susceptible \u2192 Exposed",
        "Exposed \u2192 Infectious",
        "Infectious \u2192 Recovered",
        "Infectious \u2192 Dead",
        "Recovered \u2192 Susceptible (loss of immunity)",
        "Vaccinated \u2192 Susceptible (loss of vaccine immunity)",
        "All non-terminal compartment \u2192 Natural Death"
      ],
      "flow_types": {
        "RateFlow": {
          "description": "Rate-based transition independent of other compartment populations. Supports both numeric rates and parameter references.",
          "examples": [
            "Exposed \u2192 Infectious (progression)",
            "Infectious \u2192 Recovered (recovery)",
            "Hospital \u2192 ICU (severity progression)",
            "Recovered \u2192 Susceptible (immunity loss)"
          ],
          "use_numeric_when": "Model has hardcoded rates (legacy models, simple demonstrations)",
          "use_parametric_when": "Model needs symbolic equations, parameter reuse, or matching published papers"
        },
        "ContactFlow": {
          "description": "Contact-based transmission dependent on another compartment's population. Models frequency-dependent or density-dependent transmission. Supports both numeric rates and parameter references.",
          "examples": [
            "Susceptible \u2192 Exposed (contact with Infectious)",
            "Susceptible Humans \u2192 Exposed Humans (contact with Infectious Mosquitoes)",
            "Susceptible Mosquitoes \u2192 Exposed Mosquitoes (contact with Infectious Humans)"
          ],
          "parameters": {
            "contactRate or contactRateParameter": "Transmission rate per contact",
            "contactCompartment": "Source compartment for transmission (usually Infectious or vector compartment)",
            "contactParameters": "Legacy parameter specification (deprecated)"
          },
          "use_numeric_when": "Simple models with constant transmission rates",
          "use_parametric_when": "Complex transmission (temperature-dependent, combined rates, symbolic equations)"
        }
      },
      "stratification": {
        "description": "Age-based or demographic stratification using Groups and Products",
        "stratum_specific_rates": "Different rates can be specified for each stratum within a flow. Supports both numeric and parametric approaches.",
        "examples": {
          "age_groups": [
            "0-17",
            "18-64",
            "65+"
          ],
          "demographic_groups": [
            "Male",
            "Female"
          ],
          "risk_groups": [
            "High Risk",
            "Low Risk"
          ],
          "vaccination_groups": [
            "Vaccinated",
            "Unvaccinated"
          ]
        }
      }
    },
    "validation_rules": {
      "Inflow": "Use BirthSource elements for population inflows. The inflow to a compartment which doesn't have a source (like recruitment or birth) should use birthSources rather than regular flows",
      "Outflow": "Use DeathSink elements for population outflows. Natural death and other population losses should use deathSinks rather than flows to non-existent compartments",
      "compartment_uniqueness": "Each (PrimaryName, SecondaryName) pair must be unique",
      "index_consistency": "Target indices must reference existing compartments using format '//@compartments.X'",
      "reference_consistency": "Product references must use format '//@products.X', Group references must use format '//@groups.X', Parameter references must use format '//@parameters.X'",
      "rate_format_numeric": "For numeric modeling: All rates must be numeric values (avoid symbols). Compute a final float numeric value, not an equation.",
      "rate_format_parametric": "For parametric modeling: Set numeric rates to 0.0 and use rateParameter/contactRateParameter references instead.",
      "parameter_uniqueness": "Parameter names must be unique within a model",
      "parameter_references": "All parameter references must point to existing parameters using 0-based indexing",
      "flow_type_consistency": "Use xsi:type=\"seir:RateFlow\" for progression flows, xsi:type=\"seir:ContactFlow\" for transmission flows",
      "stratification_consistency": "Compartments with product attribute should have stratumSpecificRates in their flows where applicable",
      "terminal_compartments": "Terminal compartments (like Deaths, Recovered) typically have no outgoing flows (exception: loss of immunity)",
      "contact_flow_validation": "ContactFlow must specify contactCompartment (usually an Infectious compartment) and either contactRate or contactRateParameter",
      "stratum_validation": "stratumSpecificRates stratum values must match the values defined in the referenced Group",
      "population_balance": "BirthSources and DeathSinks help maintain population balance in the model",
      "description": "Even though description is optional, it would be very helpful if each flow has a brief description explaining the purpose of this flow.",
      "unicode_support": "Parameter names support Unicode including Greek letters (\u03b1, \u03b2, \u03b3, \u03b4, \u03bc, \u03c1, \u03b8, \u03bb) and subscripts (\u2095, \u1d65, \u2081, \u2082)"
    },
    "model_extensions": {
      "parameter_system": {
        "description": "NEW in Version 2.0: Comprehensive parameter system for symbolic/parametric modeling",
        "features": [
          "Three parameter types: CONSTANT, VARIABLE, EXPRESSION",
          "Parameter references in RateFlow, ContactFlow, BirthSource, DeathSink, StratumSpecificRate",
          "Unicode support for Greek symbols and mathematical notation",
          "Separation of model structure from parameter values",
          "Automatic equation generation with symbolic output"
        ],
        "benefits": [
          "Reusability: Change parameters without modifying model structure",
          "Documentation: Parameters carry descriptions and units",
          "Professional output: Equations match published papers (\u03b2\u2081, \u03bc\u2095 instead of 0.9969, 0.001384)",
          "Environmental dependencies: Temperature, rainfall, intervention levels",
          "Backward compatibility: Existing numeric models continue working"
        ]
      },
      "stratification_system": {
        "description": "Stratification system using Groups and Products",
        "Groups": "Define demographic or risk categories (e.g., age groups, gender, risk levels)",
        "Products": "Combine multiple groups for complex stratification",
        "compartment_stratification": "Compartments can reference a Product to be automatically stratified"
      },
      "flow_enhancements": {
        "abstract_flows": "Flow is now abstract with RateFlow and ContactFlow as concrete implementations",
        "stratum_specific_rates": "Both RateFlow and ContactFlow support different rates for different strata (numeric or parametric)",
        "contact_modeling": "ContactFlow enables sophisticated transmission modeling with contact compartments",
        "parameter_references": "All flows can reference parameters instead of using numeric attributes"
      },
      "population_dynamics": {
        "BirthSource": "Models population inflow (births, immigration, recruitment). Supports numeric rates and parameter references.",
        "DeathSink": "Models population outflow (deaths, emigration). Supports numeric rates and parameter references.",
        "global_rates": "SEIRModel can specify totalPopulation, globalBirthRate, globalDeathRate"
      },
      "diagram_support": {
        "description": "Sirius diagrams intelligently display parameter names or numeric values",
        "implementation": "AQL expressions check for parameter references using ->notEmpty(), displaying parameter names when available or numeric values otherwise",
        "greek_symbols": "Full Unicode support in diagram labels for professional mathematical notation"
      },
      "equation_generation": {
        "description": "SEIREquationGenerator produces symbolic equations for parametric models",
        "features": [
          "Parameter names in equations (\u03b3\u2095, \u03c1\u2095, \u03b2\u2081) instead of numbers (0.120342, 0.001995, 0.9969)",
          "EXPRESSION parameters expanded in equations",
          "Backward compatible with numeric models",
          "Output matches mathematical notation in published papers"
        ]
      }
    },
    "modeling_approaches": {
      "numeric_modeling": {
        "description": "Traditional approach using hardcoded numeric values",
        "when_to_use": [
          "Legacy models",
          "Simple demonstrations",
          "Quick prototypes",
          "Models without parameter reuse"
        ],
        "example_snippet": "<outgoingFlows xsi:type=\"seir:RateFlow\" rate=\"0.120342\" target=\"//@compartments.3\"/>",
        "limitations": [
          "Equations show numbers instead of symbolic names",
          "Hard to track which number represents which parameter",
          "Changing a parameter value requires finding all uses",
          "Doesn't match mathematical notation in papers"
        ]
      },
      "parametric_modeling": {
        "description": "NEW approach using named parameters with references",
        "when_to_use": [
          "Published models needing to match paper equations",
          "Models with environmental dependencies (temperature, rainfall)",
          "Models requiring parameter reuse",
          "Complex models with many parameters",
          "Models needing professional mathematical notation"
        ],
        "example_snippet": "<parameters name=\"\u03b3\u2095\" expression=\"0.120342\" description=\"Recovery rate Ih to Rh\" unit=\"1/time\"/>\n<outgoingFlows xsi:type=\"seir:RateFlow\" rateParameter=\"//@parameters.9\" target=\"//@compartments.3\"/>",
        "benefits": [
          "Equations show symbolic names (\u03b3\u2095, \u03bc\u2095, \u03b2\u2081)",
          "Parameters documented with descriptions and units",
          "Easy to change parameter values in one place",
          "Supports Greek symbols and professional notation",
          "Matches published papers exactly",
          "Enables sensitivity analysis and parameter sweeps"
        ]
      },
      "mixed_modeling": {
        "description": "Combination of numeric and parametric approaches in the same model",
        "when_to_use": "Transitioning from numeric to parametric, or when only some parameters need symbolic representation",
        "priority": "Parameter references take precedence over numeric attributes when both are present"
      }
    },
    "best_practices": {
      "parameter_naming": [
        "Use Greek symbols for standard epidemiological parameters (\u03b2 for transmission, \u03bc for mortality, \u03b3 for recovery, \u03c1 for progression)",
        "Use subscripts to distinguish between populations (\u03bc\u2095 for human, \u03bc\u1d65 for vector)",
        "Use function notation for dependencies: a(T) for temperature-dependent, \u03b8\u1d65(T,R) for temperature and rainfall",
        "Keep names concise but meaningful"
      ],
      "parameter_organization": [
        "Define CONSTANT parameters first",
        "Then VARIABLE parameters (environmental inputs)",
        "Then EXPRESSION parameters (computed from others)",
        "Group related parameters together",
        "Always provide descriptions and units"
      ],
      "model_structure": [
        "Use BirthSource for all population inflows (not flows from nowhere)",
        "Use DeathSink for all population outflows (not flows to nowhere)",
        "Use RateFlow for progression, recovery, immunity loss",
        "Use ContactFlow for transmission and infection",
        "Always provide flow descriptions"
      ],
      "parametric_vs_numeric": [
        "For new models: Use parametric approach for better maintainability",
        "For existing models: Can keep numeric or migrate to parametric",
        "When using parametric: Set numeric attributes to 0.0",
        "When unsure: Start parametric, easier to maintain long-term"
      ]
    },
    "unicode_reference": {
      "greek_letters": {
        "lowercase": "\u03b1 (alpha), \u03b2 (beta), \u03b3 (gamma), \u03b4 (delta), \u03b5 (epsilon), \u03b8 (theta), \u03bb (lambda), \u03bc (mu), \u03c1 (rho), \u03c3 (sigma), \u03c6 (phi), \u03c9 (omega)",
        "uppercase": "\u0393 (Gamma), \u0394 (Delta), \u0398 (Theta), \u039b (Lambda), \u03a3 (Sigma), \u03a6 (Phi), \u03a9 (Omega)"
      },
      "subscripts": "\u2080 \u2081 \u2082 \u2083 \u2084 \u2085 \u2086 \u2087 \u2088 \u2089 \u2090 \u2091 \u2095 \u1d62 \u2c7c \u2096 \u2097 \u2098 \u2099 \u2092 \u209a \u1d63 \u209b \u209c \u1d64 \u1d65 \u2093",
      "superscripts": "\u2070 \u00b9 \u00b2 \u00b3 \u2074 \u2075 \u2076 \u2077 \u2078 \u2079 \u207a \u207b \u207c \u207d \u207e",
      "common_combinations": {
        "\u03bc\u2095": "mu_h (human mortality)",
        "\u03bc\u1d65": "mu_v (vector mortality)",
        "\u03b2\u2081": "beta1 (transmission probability 1)",
        "\u03b2\u2082": "beta2 (transmission probability 2)",
        "\u03b3\u2095": "gamma_h (human recovery rate)",
        "\u03c1\u2095": "rho_h (human progression rate)",
        "\u03b8\u1d65": "theta_v (vector recruitment)",
        "\u03b1\u2095": "alpha_h (human recruitment)",
        "\u039b\u2098": "Lambda_m (mosquito progression)"
      }
    }
  }
}
********************************************************************************
User Input:
HIV/AIDS MODEL WITH SEXUAL BEHAVIOR STRATIFICATION 
 MODEL TYPE: Parametric (use named parameters with Greek symbols) 
 COMPARTMENTS: 
 Create 4 base compartments, each stratified by SexualBehavior group: 
 - Susceptible (no secondary name) 
 - Infectious, Untreated (secondary name: "Untreated") 
 - Treated, with ART (secondary name: "with ART") 
 - Infectious, living with AIDS (secondary name: "living with AIDS") 
 STRATIFICATION: 
 Group name: SexualBehavior 
 Group values: Homosexual Men, Women, Heterosexual Men 
 Product name: SexualBehaviorProduct 
 Product description: Stratification by sexual behavior 
 All 4 compartments use this product for stratification. 
 INITIAL POPULATIONS: 
 Susceptible: Homosexual Men=2446, Women=189994, Heterosexual Men=171173 
 Infectious (Untreated): Homosexual Men=79, Women=6, Heterosexual Men=29 
 Treated: 107 total (no stratification for initial value) 
 Infectious (AIDS): 47 total (no stratification for initial value) 
 PARAMETERS: 
 Create these parameters in order with exact names, expressions, descriptions, and units: 
 Ψ | CONSTANT | 333 | Recruitment rate into susceptible population | individuals/year 
 θ | CONSTANT | 0.48 | Proportion of men in population | dimensionless 
 γ | CONSTANT | 0.92 | Proportion of heterosexual men among all men | dimensionless 
 p | CONSTANT | 0.90 | Proportion of infected receiving initial treatment | dimensionless 
 μ | CONSTANT | 0.0129 | Natural mortality rate | 1/year 
 d | CONSTANT | 0.3333 | AIDS-induced mortality rate | 1/year 
 δ | CONSTANT | 0.018 | AIDS development rate in treated individuals | 1/year 
 α | CONSTANT | 0.3333 | Departure rate from infected compartments | 1/year 
 β_h | CONSTANT | 0.44 | Probability of homosexual transmission | dimensionless 
 β_s | CONSTANT | 0.02 | Probability of heterosexual transmission | dimensionless 
 β_hw | CONSTANT | 0.018 | Probability of transmission homosexual men to women | dimensionless 
 β_hm | CONSTANT | 0.25 | Probability of transmission homosexual men to heterosexual men | dimensionless 
 c_h | CONSTANT | 7 | Sexual partners rate for homosexuals | 1/year 
 c_s | CONSTANT | 4 | Sexual partners rate for heterosexuals | 1/year 
 c_hw | CONSTANT | 2 | Sexual partners rate homosexual men and women | 1/year 
 c_hm | CONSTANT | 1 | Sexual partners rate homosexual and heterosexual men | 1/year 
 B_h | EXPRESSION | β_h * c_h | Combined transmission rate homosexuals | 1/year 
 B_s | EXPRESSION | β_s * c_s | Combined transmission rate heterosexuals | 1/year 
 B_hw | EXPRESSION | β_hw * c_hw | Combined transmission rate homosexual to women | 1/year 
 B_hm | EXPRESSION | β_hm * c_hm | Combined transmission rate homosexual to heterosexual men | 1/year 
 Ψθ(1-γ) | EXPRESSION | Ψ * θ * (1 - γ) | Recruitment rate homosexual men | individuals/year 
 Ψ(1-θ) | EXPRESSION | Ψ * (1 - θ) | Recruitment rate women | individuals/year 
 Ψθγ | EXPRESSION | Ψ * θ * γ | Recruitment rate heterosexual men | individuals/year 
 αp | EXPRESSION | α * p | Treatment initiation rate | 1/year 
 α(1-p) | EXPRESSION | α * (1 - p) | AIDS progression rate untreated | 1/year 
 λ_h | EXPRESSION | B_h * (I_h / (S_h + I_h)) | Force of infection homosexual men | 1/year 
 λ_hw | EXPRESSION | B_hw * (I_h / (S_m + S_h + I_m + I_h)) | Force of infection homosexual to women | 1/year 
 λ_hm | EXPRESSION | B_hm * (I_h / (S_m + S_h + I_m + I_h)) | Force of infection homosexual to heterosexual men | 1/year 
 λ_m | EXPRESSION | B_s * (I_m / (S_m + I_m)) | Force of infection heterosexual men | 1/year 
 λ_w | EXPRESSION | B_s * (I_w / (S_w + I_w)) | Force of infection women | 1/year 
 FLOWS: 
 All flows reference parameters not numeric values. 
 Flow 1: Susceptible to Infectious (Untreated) 
 Type: ContactFlow 
 Source: Susceptible compartment 
 Target: Infectious (Untreated) compartment 
 Description: Infection through sexual contact 
 Contact compartment: Infectious (Untreated) compartment 
 Stratum-specific contact rate parameters: 
 Homosexual Men: use λ_h parameter 
 Women: use λ_m parameter (women infected by heterosexual men Iw) 
 Heterosexual Men: use λ_w parameter (heterosexual men infected by women Im) 
 Note: This represents within-group transmission. 
 Flow 2: Susceptible to Infectious (Untreated) - Cross transmission homosexual to women 
 Type: ContactFlow 
 Source: Susceptible compartment 
 Target: Infectious (Untreated) compartment 
 Description: Cross-infection from homosexual men to women 
 Contact compartment: Infectious (Untreated) compartment 
 Stratum-specific contact rate parameters: 
 Homosexual Men: rate=0 (no flow) 
 Women: use λ_hw parameter 
 Heterosexual Men: rate=0 (no flow) 
 Flow 3: Susceptible to Infectious (Untreated) - Cross transmission homosexual to heterosexual men 
 Type: ContactFlow 
 Source: Susceptible compartment 
 Target: Infectious (Untreated) compartment 
 Description: Cross-infection from homosexual men to heterosexual men 
 Contact compartment: Infectious (Untreated) compartment 
 Stratum-specific contact rate parameters: 
 Homosexual Men: rate=0 (no flow) 
 Women: rate=0 (no flow) 
 Heterosexual Men: use λ_hm parameter 
 Flow 4: Infectious (Untreated) to Treated 
 Type: RateFlow 
 Source: Infectious (Untreated) compartment 
 Target: Treated compartment 
 Description: Initial treatment with antiretrovirals 
 Rate parameter: αp (same for all strata) 
 Flow 5: Infectious (Untreated) to Infectious (AIDS) 
 Type: RateFlow 
 Source: Infectious (Untreated) compartment 
 Target: Infectious (AIDS) compartment 
 Description: Progression to AIDS without treatment 
 Rate parameter: α(1-p) (same for all strata) 
 Flow 6: Treated to Infectious (AIDS) 
 Type: RateFlow 
 Source: Treated compartment 
 Target: Infectious (AIDS) compartment 
 Description: Treatment failure progression to AIDS 
 Rate parameter: δ (same for all strata) 
 BIRTH SOURCES: 
 All reference parameters not numeric values. 
 Birth 1: 
 Name: Recruitment of Homosexual Men 
 Rate parameter: Ψθ(1-γ) 
 Target: Susceptible compartment 
 Target stratum: Homosexual Men 
 Birth 2: 
 Name: Recruitment of Women 
 Rate parameter: Ψ(1-θ) 
 Target: Susceptible compartment 
 Target stratum: Women 
 Birth 3: 
 Name: Recruitment of Heterosexual Men 
 Rate parameter: Ψθγ 
 Target: Susceptible compartment 
 Target stratum: Heterosexual Men 
 DEATH SINKS: 
 Natural death from all compartments all strata: 
 For Susceptible compartment: 
 Natural Death from Susceptible (Homosexual Men) - rate parameter μ - source Susceptible - stratum Homosexual Men 
 Natural Death from Susceptible (Women) - rate parameter μ - source Susceptible - stratum Women 
 Natural Death from Susceptible (Heterosexual Men) - rate parameter μ - source Susceptible - stratum Heterosexual Men 
 For Infectious Untreated compartment: 
 Natural Death from Untreated Infected (Homosexual Men) - rate parameter μ - source Infectious Untreated - stratum Homosexual Men 
 Natural Death from Untreated Infected (Women) - rate parameter μ - source Infectious Untreated - stratum Women 
 Natural Death from Untreated Infected (Heterosexual Men) - rate parameter μ - source Infectious Untreated - stratum Heterosexual Men 
 For Treated compartment: 
 Natural Death from Treated (Homosexual Men) - rate parameter μ - source Treated - stratum Homosexual Men 
 Natural Death from Treated (Women) - rate parameter μ - source Treated - stratum Women 
 Natural Death from Treated (Heterosexual Men) - rate parameter μ - source Treated - stratum Heterosexual Men 
 For Infectious AIDS compartment: 
 Natural Death from AIDS (Homosexual Men) - rate parameter μ - source Infectious AIDS - stratum Homosexual Men 
 Natural Death from AIDS (Women) - rate parameter μ - source Infectious AIDS - stratum Women 
 Natural Death from AIDS (Heterosexual Men) - rate parameter μ - source Infectious AIDS - stratum Heterosexual Men 
 AIDS-induced death from AIDS compartment only: 
 AIDS Death (Homosexual Men) - rate parameter d - source Infectious AIDS - stratum Homosexual Men 
 AIDS Death (Women) - rate parameter d - source Infectious AIDS - stratum Women 
 AIDS Death (Heterosexual Men) - rate parameter d - source Infectious AIDS - stratum Heterosexual Men
********************************************************************************
LLM1 RESPONSE:
```xml
<!--
Reasoning:
- There are 4 compartments, each stratified by 3 categories of sexual behavior (total 12 compartment instances).
- 18 parameters are defined, including: 9 constant, 1 variable, and 8 expression-based parameters.
- 1 group and 1 product for stratification: SexualBehavior and SexualBehaviorProduct.
- Flows consist of 3 contact flows with stratum-specific rates and 3 rate flows.
- Birth sources include recruitment into the susceptible compartment for each stratum.
- Death sinks account for natural death from all compartments and AIDS-induced death from the AIDS compartment.
-->

<?xml version="1.0" encoding="UTF-8"?>
<seir:SEIRModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:seir="http://example.com/seirmodel">
  <parameters name="Ψ" expression="333" description="Recruitment rate into susceptible population" unit="individuals/year"/>
  <parameters name="θ" expression="0.48" description="Proportion of men in population" unit="dimensionless"/>
  <parameters name="γ" expression="0.92" description="Proportion of heterosexual men among all men" unit="dimensionless"/>
  <parameters name="p" expression="0.90" description="Proportion of infected receiving initial treatment" unit="dimensionless"/>
  <parameters name="μ" expression="0.0129" description="Natural mortality rate" unit="1/year"/>
  <parameters name="d" expression="0.3333" description="AIDS-induced mortality rate" unit="1/year"/>
  <parameters name="δ" expression="0.018" description="AIDS development rate in treated individuals" unit="1/year"/>
  <parameters name="α" expression="0.3333" description="Departure rate from infected compartments" unit="1/year"/>
  <parameters name="β_h" expression="0.44" description="Probability of homosexual transmission" unit="dimensionless"/>
  <parameters name="β_s" expression="0.02" description="Probability of heterosexual transmission" unit="dimensionless"/>
  <parameters name="β_hw" expression="0.018" description="Probability of transmission homosexual men to women" unit="dimensionless"/>
  <parameters name="β_hm" expression="0.25" description="Probability of transmission homosexual men to heterosexual men" unit="dimensionless"/>
  <parameters name="c_h" expression="7" description="Sexual partners rate for homosexuals" unit="1/year"/>
  <parameters name="c_s" expression="4" description="Sexual partners rate for heterosexuals" unit="1/year"/>
  <parameters name="c_hw" expression="2" description="Sexual partners rate homosexual men and women" unit="1/year"/>
  <parameters name="c_hm" expression="1" description="Sexual partners rate homosexual and heterosexual men" unit="1/year"/>
  <parameters name="B_h" type="EXPRESSION" expression="β_h * c_h" description="Combined transmission rate homosexuals" unit="1/year"/>
  <parameters name="B_s" type="EXPRESSION" expression="β_s * c_s" description="Combined transmission rate heterosexuals" unit="1/year"/>
  <parameters name="B_hw" type="EXPRESSION" expression="β_hw * c_hw" description="Combined transmission rate homosexual to women" unit="1/year"/>
  <parameters name="B_hm" type="EXPRESSION" expression="β_hm * c_hm" description="Combined transmission rate homosexual to heterosexual men" unit="1/year"/>
  <parameters name="Ψθ(1-γ)" type="EXPRESSION" expression="Ψ * θ * (1 - γ)" description="Recruitment rate homosexual men" unit="individuals/year"/>
  <parameters name="Ψ(1-θ)" type="EXPRESSION" expression="Ψ * (1 - θ)" description="Recruitment rate women" unit="individuals/year"/>
  <parameters name="Ψθγ" type="EXPRESSION" expression="Ψ * θ * γ" description="Recruitment rate heterosexual men" unit="individuals/year"/>
  <parameters name="αp" type="EXPRESSION" expression="α * p" description="Treatment initiation rate" unit="1/year"/>
  <parameters name="α(1-p)" type="EXPRESSION" expression="α * (1 - p)" description="AIDS progression rate untreated" unit="1/year"/>
  <parameters name="λ_h" type="EXPRESSION" expression="B_h * (I_h / (S_h + I_h))" description="Force of infection homosexual men" unit="1/year"/>
  <parameters name="λ_hw" type="EXPRESSION" expression="B_hw * (I_h / (S_m + S_h + I_m + I_h))" description="Force of infection homosexual to women" unit="1/year"/>
  <parameters name="λ_hm" type="EXPRESSION" expression="B_hm * (I_h / (S_m + S_h + I_m + I_h))" description="Force of infection homosexual to heterosexual men" unit="1/year"/>
  <parameters name="λ_m" type="EXPRESSION" expression="B_s * (I_m / (S_m + I_m))" description="Force of infection heterosexual men" unit="1/year"/>
  <parameters name="λ_w" type="EXPRESSION" expression="B_s * (I_w / (S_w + I_w))" description="Force of infection women" unit="1/year"/>

  <groups name="SexualBehavior">
    <values>Homosexual Men</values>
    <values>Women</values>
    <values>Heterosexual Men</values>
  </groups>

  <products name="SexualBehaviorProduct" description="Stratification by sexual behavior">
    <groups groups="//@groups.0"/>
  </products>

  <compartments PrimaryName="Susceptible" population="2446" product="//@products.0">
    <outgoingFlows xsi:type="seir:ContactFlow" contactRateParameter="//@parameters.16" contactCompartment="//@compartments.1" target="//@compartments.1" description="Infection through sexual contact">
      <stratumSpecificRates stratum="Homosexual Men" rateParameter="//@parameters.27"/>
      <stratumSpecificRates stratum="Women" rateParameter="//@parameters.29"/>
      <stratumSpecificRates stratum="Heterosexual Men" rateParameter="//@parameters.30"/>
    </outgoingFlows>
    <outgoingFlows xsi:type="seir:ContactFlow" contactRateParameter="//@parameters.17" contactCompartment="//@compartments.1" target="//@compartments.1" description="Cross-infection from homosexual men to women">
      <stratumSpecificRates stratum="Homosexual Men" rate="0.0"/>
      <stratumSpecificRates stratum="Women" rateParameter="//@parameters.25"/>
      <stratumSpecificRates stratum="Heterosexual Men" rate="0.0"/>
    </outgoingFlows>
    <outgoingFlows xsi:type="seir:ContactFlow" contactRateParameter="//@parameters.18" contactCompartment="//@compartments.1" target="//@compartments.1" description="Cross-infection from homosexual men to heterosexual men">
      <stratumSpecificRates stratum="Homosexual Men" rate="0.0"/>
      <stratumSpecificRates stratum="Women" rate="0.0"/>
      <stratumSpecificRates stratum="Heterosexual Men" rateParameter="//@parameters.26"/>
    </outgoingFlows>
  </compartments>

  <compartments PrimaryName="Infectious" SecondaryName="Untreated" population="79" product="//@products.0">
    <outgoingFlows xsi:type="seir:RateFlow" rateParameter="//@parameters.20" target="//@compartments.2" description="Initial treatment with antiretrovirals"/>
    <outgoingFlows xsi:type="seir:RateFlow" rateParameter="//@parameters.21" target="//@compartments.3" description="Progression to AIDS without treatment"/>
  </compartments>

  <compartments PrimaryName="Treated" SecondaryName="with ART" population="107" product="//@products.0">
    <outgoingFlows xsi:type="seir:RateFlow" rateParameter="//@parameters.6" target="//@compartments.3" description="Treatment failure progression to AIDS"/>
  </compartments>

  <compartments PrimaryName="Infectious" SecondaryName="living with AIDS" population="47" product="//@products.0"/>

  <birthSources name="Recruitment of Homosexual Men" rateParameter="//@parameters.23" targetCompartment="//@compartments.0" targetStratum="Homosexual Men"/>
  <birthSources name="Recruitment of Women" rateParameter="//@parameters.24" targetCompartment="//@compartments.0" targetStratum="Women"/>
  <birthSources name="Recruitment of Heterosexual Men" rateParameter="//@parameters.22" targetCompartment="//@compartments.0" targetStratum="Heterosexual Men"/>

  <deathSinks name="Natural Death from Susceptible (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.0" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from Susceptible (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.0" sourceStratum="Women"/>
  <deathSinks name="Natural Death from Susceptible (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.0" sourceStratum="Heterosexual Men"/>
  <deathSinks name="Natural Death from Untreated Infected (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.1" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from Untreated Infected (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.1" sourceStratum="Women"/>
  <deathSinks name="Natural Death from Untreated Infected (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.1" sourceStratum="Heterosexual Men"/>
  <deathSinks name="Natural Death from Treated (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.2" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from Treated (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.2" sourceStratum="Women"/>
  <deathSinks name="Natural Death from Treated (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.2" sourceStratum="Heterosexual Men"/>
  <deathSinks name="Natural Death from AIDS (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.3" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from AIDS (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.3" sourceStratum="Women"/>
  <deathSinks name="Natural Death from AIDS (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.3" sourceStratum="Heterosexual Men"/>
  <deathSinks name="AIDS Death (Homosexual Men)" rateParameter="//@parameters.5" sourceCompartment="//@compartments.3" sourceStratum="Homosexual Men"/>
  <deathSinks name="AIDS Death (Women)" rateParameter="//@parameters.5" sourceCompartment="//@compartments.3" sourceStratum="Women"/>
  <deathSinks name="AIDS Death (Heterosexual Men)" rateParameter="//@parameters.5" sourceCompartment="//@compartments.3" sourceStratum="Heterosexual Men"/>
</seir:SEIRModel>
```
********************************************************************************

********************************************************************************
LLM2 PROMPT:
You are an expert at mapping epidemiological parameter values into XML compartmental model files.

Your task is to take a structurally correct XML file with placeholder values and fill in the actual numeric values from the user input, following the v3 metamodel.

**Your Job**
- For PARAMETRIC models: Parameter values are already defined in <parameters> elements. You do NOT need to modify anything. The XML is complete.
- For NUMERIC models: Find all [[rate_missing]] placeholders in numeric attributes (e.g., rate, contactRate, or equivalent). Replace each with the corresponding numeric value from the user input.

**Mapping Rules - DO NOT CALCULATE**
- Your job is ONLY to map values from user input to XML placeholders.
- If user input says "rate = 0.3333", write 0.3333 in the XML.
- If user input references a named parameter, copy its numeric value exactly.
- DO NOT perform arithmetic operations.
- DO NOT evaluate expressions.
- DO NOT compute formulas.

**Handling Missing Values**
- If a required value is not provided in user input, replace [[rate_missing]] with 0.0 and add an XML comment explaining what was missing.
- Never leave [[rate_missing]] in the output.
- Never invent values.

**Stratification**
- If a flow has stratum-specific numeric values, map the value for each stratum separately.
- If user input indicates a stratum has rate 0, write 0.0.
- Ensure stratum identifiers match exactly.

**Reasoning**
- For each modification, add an XML comment above explaining:
  * Which placeholder you're replacing
  * What value you're using from user input
  * Which compartment/flow/stratum this applies to
  * If you're inserting 0.0 due to missing data, explain what was missing

**Output Format**
- Complete, valid XML with all placeholders replaced
- Include reasoning as XML comments before each modified section
- No markdown formatting, no code fences, no explanatory text outside XML comments
- Full precision for all numeric values (do not round)
- The output must be directly parseable as XML
********************************************************************************
USER INPUT:
HIV/AIDS MODEL WITH SEXUAL BEHAVIOR STRATIFICATION 
 MODEL TYPE: Parametric (use named parameters with Greek symbols) 
 COMPARTMENTS: 
 Create 4 base compartments, each stratified by SexualBehavior group: 
 - Susceptible (no secondary name) 
 - Infectious, Untreated (secondary name: "Untreated") 
 - Treated, with ART (secondary name: "with ART") 
 - Infectious, living with AIDS (secondary name: "living with AIDS") 
 STRATIFICATION: 
 Group name: SexualBehavior 
 Group values: Homosexual Men, Women, Heterosexual Men 
 Product name: SexualBehaviorProduct 
 Product description: Stratification by sexual behavior 
 All 4 compartments use this product for stratification. 
 INITIAL POPULATIONS: 
 Susceptible: Homosexual Men=2446, Women=189994, Heterosexual Men=171173 
 Infectious (Untreated): Homosexual Men=79, Women=6, Heterosexual Men=29 
 Treated: 107 total (no stratification for initial value) 
 Infectious (AIDS): 47 total (no stratification for initial value) 
 PARAMETERS: 
 Create these parameters in order with exact names, expressions, descriptions, and units: 
 Ψ | CONSTANT | 333 | Recruitment rate into susceptible population | individuals/year 
 θ | CONSTANT | 0.48 | Proportion of men in population | dimensionless 
 γ | CONSTANT | 0.92 | Proportion of heterosexual men among all men | dimensionless 
 p | CONSTANT | 0.90 | Proportion of infected receiving initial treatment | dimensionless 
 μ | CONSTANT | 0.0129 | Natural mortality rate | 1/year 
 d | CONSTANT | 0.3333 | AIDS-induced mortality rate | 1/year 
 δ | CONSTANT | 0.018 | AIDS development rate in treated individuals | 1/year 
 α | CONSTANT | 0.3333 | Departure rate from infected compartments | 1/year 
 β_h | CONSTANT | 0.44 | Probability of homosexual transmission | dimensionless 
 β_s | CONSTANT | 0.02 | Probability of heterosexual transmission | dimensionless 
 β_hw | CONSTANT | 0.018 | Probability of transmission homosexual men to women | dimensionless 
 β_hm | CONSTANT | 0.25 | Probability of transmission homosexual men to heterosexual men | dimensionless 
 c_h | CONSTANT | 7 | Sexual partners rate for homosexuals | 1/year 
 c_s | CONSTANT | 4 | Sexual partners rate for heterosexuals | 1/year 
 c_hw | CONSTANT | 2 | Sexual partners rate homosexual men and women | 1/year 
 c_hm | CONSTANT | 1 | Sexual partners rate homosexual and heterosexual men | 1/year 
 B_h | EXPRESSION | β_h * c_h | Combined transmission rate homosexuals | 1/year 
 B_s | EXPRESSION | β_s * c_s | Combined transmission rate heterosexuals | 1/year 
 B_hw | EXPRESSION | β_hw * c_hw | Combined transmission rate homosexual to women | 1/year 
 B_hm | EXPRESSION | β_hm * c_hm | Combined transmission rate homosexual to heterosexual men | 1/year 
 Ψθ(1-γ) | EXPRESSION | Ψ * θ * (1 - γ) | Recruitment rate homosexual men | individuals/year 
 Ψ(1-θ) | EXPRESSION | Ψ * (1 - θ) | Recruitment rate women | individuals/year 
 Ψθγ | EXPRESSION | Ψ * θ * γ | Recruitment rate heterosexual men | individuals/year 
 αp | EXPRESSION | α * p | Treatment initiation rate | 1/year 
 α(1-p) | EXPRESSION | α * (1 - p) | AIDS progression rate untreated | 1/year 
 λ_h | EXPRESSION | B_h * (I_h / (S_h + I_h)) | Force of infection homosexual men | 1/year 
 λ_hw | EXPRESSION | B_hw * (I_h / (S_m + S_h + I_m + I_h)) | Force of infection homosexual to women | 1/year 
 λ_hm | EXPRESSION | B_hm * (I_h / (S_m + S_h + I_m + I_h)) | Force of infection homosexual to heterosexual men | 1/year 
 λ_m | EXPRESSION | B_s * (I_m / (S_m + I_m)) | Force of infection heterosexual men | 1/year 
 λ_w | EXPRESSION | B_s * (I_w / (S_w + I_w)) | Force of infection women | 1/year 
 FLOWS: 
 All flows reference parameters not numeric values. 
 Flow 1: Susceptible to Infectious (Untreated) 
 Type: ContactFlow 
 Source: Susceptible compartment 
 Target: Infectious (Untreated) compartment 
 Description: Infection through sexual contact 
 Contact compartment: Infectious (Untreated) compartment 
 Stratum-specific contact rate parameters: 
 Homosexual Men: use λ_h parameter 
 Women: use λ_m parameter (women infected by heterosexual men Iw) 
 Heterosexual Men: use λ_w parameter (heterosexual men infected by women Im) 
 Note: This represents within-group transmission. 
 Flow 2: Susceptible to Infectious (Untreated) - Cross transmission homosexual to women 
 Type: ContactFlow 
 Source: Susceptible compartment 
 Target: Infectious (Untreated) compartment 
 Description: Cross-infection from homosexual men to women 
 Contact compartment: Infectious (Untreated) compartment 
 Stratum-specific contact rate parameters: 
 Homosexual Men: rate=0 (no flow) 
 Women: use λ_hw parameter 
 Heterosexual Men: rate=0 (no flow) 
 Flow 3: Susceptible to Infectious (Untreated) - Cross transmission homosexual to heterosexual men 
 Type: ContactFlow 
 Source: Susceptible compartment 
 Target: Infectious (Untreated) compartment 
 Description: Cross-infection from homosexual men to heterosexual men 
 Contact compartment: Infectious (Untreated) compartment 
 Stratum-specific contact rate parameters: 
 Homosexual Men: rate=0 (no flow) 
 Women: rate=0 (no flow) 
 Heterosexual Men: use λ_hm parameter 
 Flow 4: Infectious (Untreated) to Treated 
 Type: RateFlow 
 Source: Infectious (Untreated) compartment 
 Target: Treated compartment 
 Description: Initial treatment with antiretrovirals 
 Rate parameter: αp (same for all strata) 
 Flow 5: Infectious (Untreated) to Infectious (AIDS) 
 Type: RateFlow 
 Source: Infectious (Untreated) compartment 
 Target: Infectious (AIDS) compartment 
 Description: Progression to AIDS without treatment 
 Rate parameter: α(1-p) (same for all strata) 
 Flow 6: Treated to Infectious (AIDS) 
 Type: RateFlow 
 Source: Treated compartment 
 Target: Infectious (AIDS) compartment 
 Description: Treatment failure progression to AIDS 
 Rate parameter: δ (same for all strata) 
 BIRTH SOURCES: 
 All reference parameters not numeric values. 
 Birth 1: 
 Name: Recruitment of Homosexual Men 
 Rate parameter: Ψθ(1-γ) 
 Target: Susceptible compartment 
 Target stratum: Homosexual Men 
 Birth 2: 
 Name: Recruitment of Women 
 Rate parameter: Ψ(1-θ) 
 Target: Susceptible compartment 
 Target stratum: Women 
 Birth 3: 
 Name: Recruitment of Heterosexual Men 
 Rate parameter: Ψθγ 
 Target: Susceptible compartment 
 Target stratum: Heterosexual Men 
 DEATH SINKS: 
 Natural death from all compartments all strata: 
 For Susceptible compartment: 
 Natural Death from Susceptible (Homosexual Men) - rate parameter μ - source Susceptible - stratum Homosexual Men 
 Natural Death from Susceptible (Women) - rate parameter μ - source Susceptible - stratum Women 
 Natural Death from Susceptible (Heterosexual Men) - rate parameter μ - source Susceptible - stratum Heterosexual Men 
 For Infectious Untreated compartment: 
 Natural Death from Untreated Infected (Homosexual Men) - rate parameter μ - source Infectious Untreated - stratum Homosexual Men 
 Natural Death from Untreated Infected (Women) - rate parameter μ - source Infectious Untreated - stratum Women 
 Natural Death from Untreated Infected (Heterosexual Men) - rate parameter μ - source Infectious Untreated - stratum Heterosexual Men 
 For Treated compartment: 
 Natural Death from Treated (Homosexual Men) - rate parameter μ - source Treated - stratum Homosexual Men 
 Natural Death from Treated (Women) - rate parameter μ - source Treated - stratum Women 
 Natural Death from Treated (Heterosexual Men) - rate parameter μ - source Treated - stratum Heterosexual Men 
 For Infectious AIDS compartment: 
 Natural Death from AIDS (Homosexual Men) - rate parameter μ - source Infectious AIDS - stratum Homosexual Men 
 Natural Death from AIDS (Women) - rate parameter μ - source Infectious AIDS - stratum Women 
 Natural Death from AIDS (Heterosexual Men) - rate parameter μ - source Infectious AIDS - stratum Heterosexual Men 
 AIDS-induced death from AIDS compartment only: 
 AIDS Death (Homosexual Men) - rate parameter d - source Infectious AIDS - stratum Homosexual Men 
 AIDS Death (Women) - rate parameter d - source Infectious AIDS - stratum Women 
 AIDS Death (Heterosexual Men) - rate parameter d - source Infectious AIDS - stratum Heterosexual Men
********************************************************************************
LLM1'S RESPONSE:
```xml
<!--
Reasoning:
- There are 4 compartments, each stratified by 3 categories of sexual behavior (total 12 compartment instances).
- 18 parameters are defined, including: 9 constant, 1 variable, and 8 expression-based parameters.
- 1 group and 1 product for stratification: SexualBehavior and SexualBehaviorProduct.
- Flows consist of 3 contact flows with stratum-specific rates and 3 rate flows.
- Birth sources include recruitment into the susceptible compartment for each stratum.
- Death sinks account for natural death from all compartments and AIDS-induced death from the AIDS compartment.
-->

<?xml version="1.0" encoding="UTF-8"?>
<seir:SEIRModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:seir="http://example.com/seirmodel">
  <parameters name="Ψ" expression="333" description="Recruitment rate into susceptible population" unit="individuals/year"/>
  <parameters name="θ" expression="0.48" description="Proportion of men in population" unit="dimensionless"/>
  <parameters name="γ" expression="0.92" description="Proportion of heterosexual men among all men" unit="dimensionless"/>
  <parameters name="p" expression="0.90" description="Proportion of infected receiving initial treatment" unit="dimensionless"/>
  <parameters name="μ" expression="0.0129" description="Natural mortality rate" unit="1/year"/>
  <parameters name="d" expression="0.3333" description="AIDS-induced mortality rate" unit="1/year"/>
  <parameters name="δ" expression="0.018" description="AIDS development rate in treated individuals" unit="1/year"/>
  <parameters name="α" expression="0.3333" description="Departure rate from infected compartments" unit="1/year"/>
  <parameters name="β_h" expression="0.44" description="Probability of homosexual transmission" unit="dimensionless"/>
  <parameters name="β_s" expression="0.02" description="Probability of heterosexual transmission" unit="dimensionless"/>
  <parameters name="β_hw" expression="0.018" description="Probability of transmission homosexual men to women" unit="dimensionless"/>
  <parameters name="β_hm" expression="0.25" description="Probability of transmission homosexual men to heterosexual men" unit="dimensionless"/>
  <parameters name="c_h" expression="7" description="Sexual partners rate for homosexuals" unit="1/year"/>
  <parameters name="c_s" expression="4" description="Sexual partners rate for heterosexuals" unit="1/year"/>
  <parameters name="c_hw" expression="2" description="Sexual partners rate homosexual men and women" unit="1/year"/>
  <parameters name="c_hm" expression="1" description="Sexual partners rate homosexual and heterosexual men" unit="1/year"/>
  <parameters name="B_h" type="EXPRESSION" expression="β_h * c_h" description="Combined transmission rate homosexuals" unit="1/year"/>
  <parameters name="B_s" type="EXPRESSION" expression="β_s * c_s" description="Combined transmission rate heterosexuals" unit="1/year"/>
  <parameters name="B_hw" type="EXPRESSION" expression="β_hw * c_hw" description="Combined transmission rate homosexual to women" unit="1/year"/>
  <parameters name="B_hm" type="EXPRESSION" expression="β_hm * c_hm" description="Combined transmission rate homosexual to heterosexual men" unit="1/year"/>
  <parameters name="Ψθ(1-γ)" type="EXPRESSION" expression="Ψ * θ * (1 - γ)" description="Recruitment rate homosexual men" unit="individuals/year"/>
  <parameters name="Ψ(1-θ)" type="EXPRESSION" expression="Ψ * (1 - θ)" description="Recruitment rate women" unit="individuals/year"/>
  <parameters name="Ψθγ" type="EXPRESSION" expression="Ψ * θ * γ" description="Recruitment rate heterosexual men" unit="individuals/year"/>
  <parameters name="αp" type="EXPRESSION" expression="α * p" description="Treatment initiation rate" unit="1/year"/>
  <parameters name="α(1-p)" type="EXPRESSION" expression="α * (1 - p)" description="AIDS progression rate untreated" unit="1/year"/>
  <parameters name="λ_h" type="EXPRESSION" expression="B_h * (I_h / (S_h + I_h))" description="Force of infection homosexual men" unit="1/year"/>
  <parameters name="λ_hw" type="EXPRESSION" expression="B_hw * (I_h / (S_m + S_h + I_m + I_h))" description="Force of infection homosexual to women" unit="1/year"/>
  <parameters name="λ_hm" type="EXPRESSION" expression="B_hm * (I_h / (S_m + S_h + I_m + I_h))" description="Force of infection homosexual to heterosexual men" unit="1/year"/>
  <parameters name="λ_m" type="EXPRESSION" expression="B_s * (I_m / (S_m + I_m))" description="Force of infection heterosexual men" unit="1/year"/>
  <parameters name="λ_w" type="EXPRESSION" expression="B_s * (I_w / (S_w + I_w))" description="Force of infection women" unit="1/year"/>

  <groups name="SexualBehavior">
    <values>Homosexual Men</values>
    <values>Women</values>
    <values>Heterosexual Men</values>
  </groups>

  <products name="SexualBehaviorProduct" description="Stratification by sexual behavior">
    <groups groups="//@groups.0"/>
  </products>

  <compartments PrimaryName="Susceptible" population="2446" product="//@products.0">
    <outgoingFlows xsi:type="seir:ContactFlow" contactRateParameter="//@parameters.16" contactCompartment="//@compartments.1" target="//@compartments.1" description="Infection through sexual contact">
      <stratumSpecificRates stratum="Homosexual Men" rateParameter="//@parameters.27"/>
      <stratumSpecificRates stratum="Women" rateParameter="//@parameters.29"/>
      <stratumSpecificRates stratum="Heterosexual Men" rateParameter="//@parameters.30"/>
    </outgoingFlows>
    <outgoingFlows xsi:type="seir:ContactFlow" contactRateParameter="//@parameters.17" contactCompartment="//@compartments.1" target="//@compartments.1" description="Cross-infection from homosexual men to women">
      <stratumSpecificRates stratum="Homosexual Men" rate="0.0"/>
      <stratumSpecificRates stratum="Women" rateParameter="//@parameters.25"/>
      <stratumSpecificRates stratum="Heterosexual Men" rate="0.0"/>
    </outgoingFlows>
    <outgoingFlows xsi:type="seir:ContactFlow" contactRateParameter="//@parameters.18" contactCompartment="//@compartments.1" target="//@compartments.1" description="Cross-infection from homosexual men to heterosexual men">
      <stratumSpecificRates stratum="Homosexual Men" rate="0.0"/>
      <stratumSpecificRates stratum="Women" rate="0.0"/>
      <stratumSpecificRates stratum="Heterosexual Men" rateParameter="//@parameters.26"/>
    </outgoingFlows>
  </compartments>

  <compartments PrimaryName="Infectious" SecondaryName="Untreated" population="79" product="//@products.0">
    <outgoingFlows xsi:type="seir:RateFlow" rateParameter="//@parameters.20" target="//@compartments.2" description="Initial treatment with antiretrovirals"/>
    <outgoingFlows xsi:type="seir:RateFlow" rateParameter="//@parameters.21" target="//@compartments.3" description="Progression to AIDS without treatment"/>
  </compartments>

  <compartments PrimaryName="Treated" SecondaryName="with ART" population="107" product="//@products.0">
    <outgoingFlows xsi:type="seir:RateFlow" rateParameter="//@parameters.6" target="//@compartments.3" description="Treatment failure progression to AIDS"/>
  </compartments>

  <compartments PrimaryName="Infectious" SecondaryName="living with AIDS" population="47" product="//@products.0"/>

  <birthSources name="Recruitment of Homosexual Men" rateParameter="//@parameters.23" targetCompartment="//@compartments.0" targetStratum="Homosexual Men"/>
  <birthSources name="Recruitment of Women" rateParameter="//@parameters.24" targetCompartment="//@compartments.0" targetStratum="Women"/>
  <birthSources name="Recruitment of Heterosexual Men" rateParameter="//@parameters.22" targetCompartment="//@compartments.0" targetStratum="Heterosexual Men"/>

  <deathSinks name="Natural Death from Susceptible (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.0" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from Susceptible (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.0" sourceStratum="Women"/>
  <deathSinks name="Natural Death from Susceptible (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.0" sourceStratum="Heterosexual Men"/>
  <deathSinks name="Natural Death from Untreated Infected (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.1" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from Untreated Infected (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.1" sourceStratum="Women"/>
  <deathSinks name="Natural Death from Untreated Infected (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.1" sourceStratum="Heterosexual Men"/>
  <deathSinks name="Natural Death from Treated (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.2" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from Treated (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.2" sourceStratum="Women"/>
  <deathSinks name="Natural Death from Treated (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.2" sourceStratum="Heterosexual Men"/>
  <deathSinks name="Natural Death from AIDS (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.3" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from AIDS (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.3" sourceStratum="Women"/>
  <deathSinks name="Natural Death from AIDS (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.3" sourceStratum="Heterosexual Men"/>
  <deathSinks name="AIDS Death (Homosexual Men)" rateParameter="//@parameters.5" sourceCompartment="//@compartments.3" sourceStratum="Homosexual Men"/>
  <deathSinks name="AIDS Death (Women)" rateParameter="//@parameters.5" sourceCompartment="//@compartments.3" sourceStratum="Women"/>
  <deathSinks name="AIDS Death (Heterosexual Men)" rateParameter="//@parameters.5" sourceCompartment="//@compartments.3" sourceStratum="Heterosexual Men"/>
</seir:SEIRModel>
```
********************************************************************************
LLM2'S RESPONSE:
```xml
<!--
Reasoning:
- There are 4 compartments, each stratified by 3 categories of sexual behavior (total 12 compartment instances).
- 18 parameters are defined, including: 9 constant, 1 variable, and 8 expression-based parameters.
- 1 group and 1 product for stratification: SexualBehavior and SexualBehaviorProduct.
- Flows consist of 3 contact flows with stratum-specific rates and 3 rate flows.
- Birth sources include recruitment into the susceptible compartment for each stratum.
- Death sinks account for natural death from all compartments and AIDS-induced death from the AIDS compartment.
-->

<?xml version="1.0" encoding="UTF-8"?>
<seir:SEIRModel xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:seir="http://example.com/seirmodel">
  <parameters name="Ψ" expression="333" description="Recruitment rate into susceptible population" unit="individuals/year"/>
  <parameters name="θ" expression="0.48" description="Proportion of men in population" unit="dimensionless"/>
  <parameters name="γ" expression="0.92" description="Proportion of heterosexual men among all men" unit="dimensionless"/>
  <parameters name="p" expression="0.90" description="Proportion of infected receiving initial treatment" unit="dimensionless"/>
  <parameters name="μ" expression="0.0129" description="Natural mortality rate" unit="1/year"/>
  <parameters name="d" expression="0.3333" description="AIDS-induced mortality rate" unit="1/year"/>
  <parameters name="δ" expression="0.018" description="AIDS development rate in treated individuals" unit="1/year"/>
  <parameters name="α" expression="0.3333" description="Departure rate from infected compartments" unit="1/year"/>
  <parameters name="β_h" expression="0.44" description="Probability of homosexual transmission" unit="dimensionless"/>
  <parameters name="β_s" expression="0.02" description="Probability of heterosexual transmission" unit="dimensionless"/>
  <parameters name="β_hw" expression="0.018" description="Probability of transmission homosexual men to women" unit="dimensionless"/>
  <parameters name="β_hm" expression="0.25" description="Probability of transmission homosexual men to heterosexual men" unit="dimensionless"/>
  <parameters name="c_h" expression="7" description="Sexual partners rate for homosexuals" unit="1/year"/>
  <parameters name="c_s" expression="4" description="Sexual partners rate for heterosexuals" unit="1/year"/>
  <parameters name="c_hw" expression="2" description="Sexual partners rate homosexual men and women" unit="1/year"/>
  <parameters name="c_hm" expression="1" description="Sexual partners rate homosexual and heterosexual men" unit="1/year"/>
  <parameters name="B_h" type="EXPRESSION" expression="β_h * c_h" description="Combined transmission rate homosexuals" unit="1/year"/>
  <parameters name="B_s" type="EXPRESSION" expression="β_s * c_s" description="Combined transmission rate heterosexuals" unit="1/year"/>
  <parameters name="B_hw" type="EXPRESSION" expression="β_hw * c_hw" description="Combined transmission rate homosexual to women" unit="1/year"/>
  <parameters name="B_hm" type="EXPRESSION" expression="β_hm * c_hm" description="Combined transmission rate homosexual to heterosexual men" unit="1/year"/>
  <parameters name="Ψθ(1-γ)" type="EXPRESSION" expression="Ψ * θ * (1 - γ)" description="Recruitment rate homosexual men" unit="individuals/year"/>
  <parameters name="Ψ(1-θ)" type="EXPRESSION" expression="Ψ * (1 - θ)" description="Recruitment rate women" unit="individuals/year"/>
  <parameters name="Ψθγ" type="EXPRESSION" expression="Ψ * θ * γ" description="Recruitment rate heterosexual men" unit="individuals/year"/>
  <parameters name="αp" type="EXPRESSION" expression="α * p" description="Treatment initiation rate" unit="1/year"/>
  <parameters name="α(1-p)" type="EXPRESSION" expression="α * (1 - p)" description="AIDS progression rate untreated" unit="1/year"/>
  <parameters name="λ_h" type="EXPRESSION" expression="B_h * (I_h / (S_h + I_h))" description="Force of infection homosexual men" unit="1/year"/>
  <parameters name="λ_hw" type="EXPRESSION" expression="B_hw * (I_h / (S_m + S_h + I_m + I_h))" description="Force of infection homosexual to women" unit="1/year"/>
  <parameters name="λ_hm" type="EXPRESSION" expression="B_hm * (I_h / (S_m + S_h + I_m + I_h))" description="Force of infection homosexual to heterosexual men" unit="1/year"/>
  <parameters name="λ_m" type="EXPRESSION" expression="B_s * (I_m / (S_m + I_m))" description="Force of infection heterosexual men" unit="1/year"/>
  <parameters name="λ_w" type="EXPRESSION" expression="B_s * (I_w / (S_w + I_w))" description="Force of infection women" unit="1/year"/>

  <groups name="SexualBehavior">
    <values>Homosexual Men</values>
    <values>Women</values>
    <values>Heterosexual Men</values>
  </groups>

  <products name="SexualBehaviorProduct" description="Stratification by sexual behavior">
    <groups groups="//@groups.0"/>
  </products>

  <compartments PrimaryName="Susceptible" population="2446" product="//@products.0">
    <outgoingFlows xsi:type="seir:ContactFlow" contactRateParameter="//@parameters.16" contactCompartment="//@compartments.1" target="//@compartments.1" description="Infection through sexual contact">
      <stratumSpecificRates stratum="Homosexual Men" rateParameter="//@parameters.27"/>
      <stratumSpecificRates stratum="Women" rateParameter="//@parameters.29"/>
      <stratumSpecificRates stratum="Heterosexual Men" rateParameter="//@parameters.30"/>
    </outgoingFlows>
    <outgoingFlows xsi:type="seir:ContactFlow" contactRateParameter="//@parameters.17" contactCompartment="//@compartments.1" target="//@compartments.1" description="Cross-infection from homosexual men to women">
      <stratumSpecificRates stratum="Homosexual Men" rate="0.0"/>
      <stratumSpecificRates stratum="Women" rateParameter="//@parameters.25"/>
      <stratumSpecificRates stratum="Heterosexual Men" rate="0.0"/>
    </outgoingFlows>
    <outgoingFlows xsi:type="seir:ContactFlow" contactRateParameter="//@parameters.18" contactCompartment="//@compartments.1" target="//@compartments.1" description="Cross-infection from homosexual men to heterosexual men">
      <stratumSpecificRates stratum="Homosexual Men" rate="0.0"/>
      <stratumSpecificRates stratum="Women" rate="0.0"/>
      <stratumSpecificRates stratum="Heterosexual Men" rateParameter="//@parameters.26"/>
    </outgoingFlows>
  </compartments>

  <compartments PrimaryName="Infectious" SecondaryName="Untreated" population="79" product="//@products.0">
    <outgoingFlows xsi:type="seir:RateFlow" rateParameter="//@parameters.20" target="//@compartments.2" description="Initial treatment with antiretrovirals"/>
    <outgoingFlows xsi:type="seir:RateFlow" rateParameter="//@parameters.21" target="//@compartments.3" description="Progression to AIDS without treatment"/>
  </compartments>

  <compartments PrimaryName="Treated" SecondaryName="with ART" population="107" product="//@products.0">
    <outgoingFlows xsi:type="seir:RateFlow" rateParameter="//@parameters.6" target="//@compartments.3" description="Treatment failure progression to AIDS"/>
  </compartments>

  <compartments PrimaryName="Infectious" SecondaryName="living with AIDS" population="47" product="//@products.0"/>

  <birthSources name="Recruitment of Homosexual Men" rateParameter="//@parameters.23" targetCompartment="//@compartments.0" targetStratum="Homosexual Men"/>
  <birthSources name="Recruitment of Women" rateParameter="//@parameters.24" targetCompartment="//@compartments.0" targetStratum="Women"/>
  <birthSources name="Recruitment of Heterosexual Men" rateParameter="//@parameters.22" targetCompartment="//@compartments.0" targetStratum="Heterosexual Men"/>

  <deathSinks name="Natural Death from Susceptible (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.0" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from Susceptible (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.0" sourceStratum="Women"/>
  <deathSinks name="Natural Death from Susceptible (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.0" sourceStratum="Heterosexual Men"/>
  <deathSinks name="Natural Death from Untreated Infected (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.1" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from Untreated Infected (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.1" sourceStratum="Women"/>
  <deathSinks name="Natural Death from Untreated Infected (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.1" sourceStratum="Heterosexual Men"/>
  <deathSinks name="Natural Death from Treated (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.2" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from Treated (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.2" sourceStratum="Women"/>
  <deathSinks name="Natural Death from Treated (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.2" sourceStratum="Heterosexual Men"/>
  <deathSinks name="Natural Death from AIDS (Homosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.3" sourceStratum="Homosexual Men"/>
  <deathSinks name="Natural Death from AIDS (Women)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.3" sourceStratum="Women"/>
  <deathSinks name="Natural Death from AIDS (Heterosexual Men)" rateParameter="//@parameters.4" sourceCompartment="//@compartments.3" sourceStratum="Heterosexual Men"/>
  <deathSinks name="AIDS Death (Homosexual Men)" rateParameter="//@parameters.5" sourceCompartment="//@compartments.3" sourceStratum="Homosexual Men"/>
  <deathSinks name="AIDS Death (Women)" rateParameter="//@parameters.5" sourceCompartment="//@compartments.3" sourceStratum="Women"/>
  <deathSinks name="AIDS Death (Heterosexual Men)" rateParameter="//@parameters.5" sourceCompartment="//@compartments.3" sourceStratum="Heterosexual Men"/>
</seir:SEIRModel>
```